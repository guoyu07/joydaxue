h1. API Version1 Documentation

{{>toc}}

h2. <接口通用说明>

* 接口对接地址
<pre>
<code>
  测试环境：api.staging.com

  发布环境：api.production.com
</code>
</pre>

* 通用错误输出: HTTP 状态码为 200
<pre>
<code class="javascript">
{
  "status": "3001",
  "message": "用户不存在",
  "data": {},
  "pagination": {}
}
</code>
</pre>

* 分页数据参数说明
|_.参数名              |_.字段类型              |_.说明|
|status|字符|四位数字编号，只有“0000”代表正常，其他均为定制的错误信息|
|message|字符|响应说明|
|data|哈希|响应数据|
|pagination|哈希|分页数据|

* 分页数据实例
<pre>
<code class="javascript">
{
  "pagination": {
      "total_count": 45,
      "per_page": 15,
      "current_page": 1,
      "total_pages": 3,
      "next_page": 2,
      "prev_page": ""
  }
}
</code>
</pre>

* 分页数据参数说明
|_.参数名              |_.字段类型              |_.说明|
|pagination.total_count|整数|数据总条数|
|pagination.per_page|整数|每页数据显示条数|
|pagination.current_page|整数|当前第几页|
|pagination.total_pages|整数|数据总页数|
|pagination.next_page|字符|下一页数，空字符串为没有下一页|
|pagination.prev_page|字符|上一页数，空字符串为没有上一页|

* 获取数据链接通配结构说明:
** http://host/url/?page={page}&per_page={per_page}
** page 字段: 获取第几页数据
** per_page 字段: 控制每页数据显示条数


h2. Resource School

h3. ~/v1/schools [GET]

* 功能描述: 获取学校列表接口

* 请求实例

<pre>
<code class="javascript">
    Content-Type: application/json

    GET /v1/schools
</code>
</pre>

* 输入参数说明
无

* 响应实例

<pre>
<code class="javascript">
    Content-Type: application/json
    Response Data:
    {
        "data": [
            {
                "school_id": "1",
                "name": "南通大学",
                "address": "江苏省南通市啬园路9号",
                "share_link": "url",
                "favorite_id": "school:1",
                "updated_at": "2015-07-28 10:46:06",
                "created_at": "2015-07-28 10:46:06",
                "images": [
                  {
                    "thumb": "url",
                    "image": "url"
                  }
                ]
            }
        ]
    }
</code>
</pre>

* 输出参数说明
|_.字段名                |_.字段类型              |_.说明|
|data.school_id|整数|学校的数据库 ID |
|data.name|字符|学校的名称 |
|data.address|整数|学校的地址 |
|data.share_link|字符|学校内容的分享链接 |
|data.favorite_id|字符|学校的收藏 ID |
|data.updated_at|字符|学校记录的更新时间 |
|data.created_at|字符|学校记录的创建时间 |
|data.images.thumb|字符|学校的缩略图链接 |
|data.images.image|字符|学校的原始图链接 |


h3. ~/v1/schools/<id> [GET]

* 功能描述: 获取学校详情接口

* 请求实例

<pre>
<code class="javascript">
    Content-Type: application/json

    GET /v1/schools/1
</code>
</pre>

* 输入参数说明
|_.参数名                |_.是否必选                |_.字段类型              |_.说明|
|id|是|整数|学校的数据库 ID|

* 响应实例

<pre>
<code class="javascript">
    Content-Type: application/json
    Response Data:
    {
        "data": {
            "school_id": "1",
            "name": "南通大学",
            "address": "江苏省南通市啬园路9号",
            "share_link": "url",
            "favorite_id": "school:1",
            "updated_at": "2015-07-28 10:46:06",
            "created_at": "2015-07-28 10:46:06",
            "images": [
              {
                "thumb": "url",
                "image": "url"
              }
            ]
        }
    }
</code>
</pre>

* 输出参数说明
|_.字段名                |_.字段类型              |_.说明|
|data.school_id|整数|学校的数据库 ID |
|data.name|字符|学校的名称 |
|data.address|整数|学校的地址 |
|data.share_link|字符|学校内容的分享链接 |
|data.favorite_id|字符|学校的收藏 ID |
|data.updated_at|字符|学校记录的更新时间 |
|data.created_at|字符|学校记录的创建时间 |
|data.images.thumb|字符|学校的缩略图链接 |
|data.images.image|字符|学校的原始图链接 |


h2. Resource User

h3. ~/v1/users/<id> [GET]

* 功能描述: 获取用户的个人数据

* 请求实例

<pre>
<code class="javascript">
    Content-Type: application/json

    GET /v1/users/1?token=3222b72fc04661ac1a157bcc3e18c89733
</code>
</pre>

* 输入参数说明
|_.参数名                |_.是否必选                |_.字段类型              |_.说明|
|id|是|整数|用户的数据库 ID |
|token|否|字符|用户的唯一标识 |

* 响应实例

<pre>
<code class="javascript">
    Content-Type: application/json
    HTTP Status Code: 201
    Response Data:
    {
        "data": [
            {
                "user_id": 1,
                "name": "爱旅行",
                "sex": 1
            }
        ]
    }
</code>
</pre>

* 输出参数说明
|_.字段名                |_.字段类型              |_.说明|
|data.user_id|整数|用户的数据库 ID |
|data.name|字符|用户的名称 |
|data.sex|整数|用户的性别，0 为女，1 为男 |


h3. ~/v1/users/<id>/follows [GET]

* 功能描述: 获取用户的关注列表

* 请求实例

<pre>
<code class="javascript">
    Content-Type: application/json

    GET /v1/users/1/follows?token=3222b72fc04661ac1a157bcc3e18c89733
</code>
</pre>

* 输入参数说明
|_.参数名                |_.是否必选                |_.字段类型              |_.说明|
|id|是|整数|用户的数据库 ID |
|token|否|字符|用户的唯一标识 |

* 响应实例

<pre>
<code class="javascript">
    Content-Type: application/json
    HTTP Status Code: 201
    Response Data:
    {
        "data": [
            {
                "user_id": 2,
                "name": "爱旅行",
                "sex": 0,
                "is_fans": true
            }
        ]
    }
</code>
</pre>

* 输出参数说明
|_.字段名                |_.字段类型              |_.说明|
|data.user_id|整数|用户的数据库 ID |
|data.name|字符|用户的名称 |
|data.sex|整数|用户的性别，0 为女，1 为男 |
|data.is_fans|布尔|当前用户（登录用户，或者匿名访客），是否为所查看用户的粉丝，是为 true，否则为 false |



h3. ~/v1/users/<id>/fans [GET]

* 功能描述: 获取用户的粉丝列表

* 请求实例

<pre>
<code class="javascript">
    Content-Type: application/json

    GET /v1/users/1/fans?token=3222b72fc04661ac1a157bcc3e18c89733
</code>
</pre>

* 输入参数说明
|_.参数名                |_.是否必选                |_.字段类型              |_.说明|
|id|是|整数|用户的数据库 ID |
|token|否|字符|用户的唯一标识 |

* 响应实例

<pre>
<code class="javascript">
    Content-Type: application/json
    HTTP Status Code: 201
    Response Data:
    {
        "data": [
            {
                "user_id": 2,
                "name": "爱旅行",
                "sex": 0,
                "is_fans": true
            }
        ]
    }
</code>
</pre>

* 输出参数说明
|_.字段名                |_.字段类型              |_.说明|
|data.user_id|整数|用户的数据库 ID |
|data.name|字符|用户的名称 |
|data.sex|整数|用户的性别，0 为女，1 为男 |
|data.is_fans|布尔|当前用户（登录用户，或者匿名访客），是否为所查看用户的粉丝，是为 true，否则为 false |
